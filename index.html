<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Writing Booster v3.5 Pro</title>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0b1020">
  <link rel="stylesheet" href="style.css">
</head>
<body>
<header class="appbar">
  <div class="brand"><span class="dot"></span>Writing Booster <em>v3.5 Pro</em></div>
  <nav class="tabs">
    <button data-tab="dictation" class="active">ğŸ§ Dictation</button>
    <button data-tab="typing">âŒ¨ï¸ Typing</button>
    <button data-tab="writing">ğŸ“ Writing</button>
    <button data-tab="images">ğŸ–¼ï¸ Describe</button>
    <button data-tab="spelling">ğŸ”¤ Spelling</button>
    <button data-tab="progress">ğŸ“ˆ Progress</button>
  </nav>
  <div class="userbox">
    <span id="userBadge">guest</span>
    <button id="btnSignin">Sign in</button>
  </div>
</header>

<main>
  <dialog id="auth">
    <h3>Sign in (local)</h3>
    <p class="muted">No server. Saved on this device via IndexedDB.</p>
    <input id="username" type="text" placeholder="username e.g., ahmed">
    <menu><button id="doSignin">Sign in</button><button id="closeSignin">Close</button></menu>
  </dialog>

  <section id="tab-dictation" class="tab active">
    <h2>ğŸ§ Dictation â€” CEFR + TED Autoâ€‘captions</h2>
    <div class="grid">
      <div class="card">
        <h3>CEFR Library</h3>
        <label>Level</label>
        <select id="dcLevel"><option>A1</option><option>A2</option><option>B1</option><option>B2</option><option>C1</option><option>C2</option></select>
        <label>Variant</label>
        <select id="dcVariant"></select>
        <div class="row">
          <button id="dcPlay">â–¶ï¸ Play (TTS)</button>
          <button id="dcUse">Use for checking</button>
        </div>
        <hr>
        <h3>TED Random + Captions</h3>
        <div class="row">
          <button id="tedLoad">ğŸ² Load random TED</button>
          <button id="tedRandomStart">â†©ï¸ Random start</button>
          <button id="tedFetch">ğŸª„ Fetch captions (auto)</button>
        </div>
        <textarea id="tedText" placeholder="Transcript (auto or paste manually)"></textarea>
        <div class="row">
          <button id="tedPick">ğŸ¯ Pick 15â€“30s clip</button>
          <button id="tedClipTTS">ğŸ”Š Play clip (TTS)</button>
          <button id="tedUse">Use for checking</button>
        </div>
        <p id="tedInfo" class="muted"></p>
        <div id="ytWrap"></div>
      </div>
      <div class="card">
        <textarea id="dcInput" placeholder="Type what you hear..."></textarea>
        <div class="row">
          <button id="dcCheck">Check</button>
          <button id="dcClear">Clear</button>
        </div>
        <div id="dcFeedback"></div>
      </div>
    </div>
  </section>

  <section id="tab-typing" class="tab">
    <h2>âŒ¨ï¸ Typing Trainer</h2>
    <div class="grid">
      <div class="card">
        <label>Level</label>
        <select id="tpLevel"><option>A1</option><option>A2</option><option>B1</option><option>B2</option><option>C1</option><option>C2</option></select>
        <label>Topic</label>
        <select id="tpTopic"><option>General</option><option>Academic</option><option>Tech</option></select>
        <label>Length</label>
        <select id="tpLen"><option value="short">Short</option><option value="med" selected>Medium</option><option value="long">Long</option></select>
        <label>Time</label>
        <select id="tpTime"><option value="30">30s</option><option value="60" selected>60s</option><option value="120">120s</option></select>
        <button id="tpStart">Start</button>
        <p>Time: <span id="tpLeft">60</span>s â€¢ WPM: <span id="tpWpm">0</span> â€¢ Acc: <span id="tpAcc">100%</span></p>
      </div>
      <div class="card">
        <div id="tpText"></div>
        <textarea id="tpInput" placeholder="Type here..." disabled></textarea>
      </div>
    </div>
  </section>

  <section id="tab-writing" class="tab">
    <h2>ğŸ“ Writing â€” 5:00 â€¢ Target length</h2>
    <div class="grid">
      <div class="card">
        <label>Prompt</label>
        <textarea id="wrPrompt" placeholder="Auto prompt will appear..."></textarea>
        <div class="chips" id="wrConn"></div>
        <div class="row">
          <label>Timer</label>
          <select id="wrMin"><option value="5" selected>5</option><option value="10">10</option><option value="15">15</option></select>
          <button id="wrStart">â–¶ï¸</button>
          <button id="wrReset">â¹ï¸</button>
          <span id="wrClock">05:00</span>
        </div>
        <div class="row">
          <label>Target words</label>
          <select id="wrTarget"><option value="120">120</option><option value="180" selected>180</option><option value="250">250</option></select>
          <span id="wrCount">0</span>
        </div>
      </div>
      <div class="card">
        <textarea id="wrText" placeholder="Start writing..."></textarea>
        <div class="row">
          <button id="wrAnalyze">âœ… Finish & evaluate</button>
          <button id="wrClear">ğŸ§¹ Clear</button>
        </div>
        <div id="wrReport"></div>
      </div>
    </div>
  </section>

  <section id="tab-images" class="tab">
    <h2>ğŸ–¼ï¸ Describe Image â€” 1:00</h2>
    <div class="grid">
      <div class="card">
        <button id="imgRandom">ğŸ² Random Image</button>
        <input type="file" id="imgUpload" accept="image/*">
        <img id="imgView" alt="Practice">
        <div class="row">
          <button id="imgStart">â–¶ï¸</button>
          <button id="imgReset">â¹ï¸</button>
          <span id="imgClock">01:00</span>
        </div>
      </div>
      <div class="card">
        <textarea id="imgText" placeholder="Describe in 3â€“5 sentences with connectors."></textarea>
        <div class="row">
          <button id="imgSave">Save & analyze</button>
          <button id="imgClear">Clear</button>
          <span id="imgCount">0</span>
        </div>
        <div id="imgReport"></div>
      </div>
    </div>
  </section>

  <section id="tab-spelling" class="tab">
    <h2>ğŸ”¤ Spelling SRS</h2>
    <div class="grid">
      <div class="card">
        <h3>Due Today</h3>
        <ul id="srsToday"></ul>
        <div class="row"><button id="srsStart">Start session</button></div>
      </div>
      <div class="card">
        <h3>All Words</h3>
        <ul id="srsAll"></ul>
        <div class="row">
          <button id="srsExport">Export .txt</button>
          <button id="srsClear">Clear all</button>
        </div>
      </div>
    </div>
  </section>

  <section id="tab-progress" class="tab">
    <h2>ğŸ“ˆ Progress</h2>
    <div class="grid">
      <div class="card">
        <p>Total sessions: <b id="pgSessions">0</b></p>
        <p>Avg WPM: <b id="pgWpm">0</b></p>
        <p>Avg DET: <b id="pgDet">0</b></p>
        <button id="pgExport">Export CSV</button>
        <button id="pgImport">Import CSV</button>
        <input id="pgFile" type="file" accept=".csv" style="display:none">
      </div>
      <div class="card">
        <div id="pgSpark"></div>
        <table id="pgTable">
          <thead><tr><th>Date</th><th>Type</th><th>Words</th><th>Miss%</th><th>TTR</th><th>Conn.</th><th>WPM</th><th>Acc%</th><th>DET</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </section>
</main>

<footer>
  <p>Â© v3.5 Pro â€” Data saved locally (IndexedDB) â€¢ PWA ready</p>
</footer>

<script src="app.js"></script>
</body>
</html>
